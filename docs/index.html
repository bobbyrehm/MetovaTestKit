<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MetovaTestKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="MetovaTestKit  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          MetovaTestKit Docs
        </a>
         (100% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/metova/MetovaTestKit">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">MetovaTestKit Reference</a>
      <img class="carat" src="img/carat.png" />
      MetovaTestKit  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UIAlertActionStyle.html">UIAlertActionStyle</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UIAlertControllerStyle.html">UIAlertControllerStyle</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/XCTestCase.html">XCTestCase</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F13MetovaTestKit25MTKAssertAlertIsPresentedFT2byCSo16UIViewController5styleOSC22UIAlertControllerStyle5titleGSqSS_7messageGSqSS_7actionsGSaVS_19ExpectedAlertAction_GSqSS_4fileVs12StaticString4lineSu_T_">MTKAssertAlertIsPresented(by:style:title:message:actions:_:file:line:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F13MetovaTestKit22MTKAssertBarButtonItemFTCSo15UIBarButtonItem5sendsV10ObjectiveC8Selector2toCSo8NSObjectKT_GSqSS_4fileVs12StaticString4lineSu_T_">MTKAssertBarButtonItem(_:sends:to:_:file:line:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F13MetovaTestKit16MTKAssertControlFTCSo9UIControl5sendsV10ObjectiveC8Selector2toCSo8NSObject3forVSC15UIControlEventsKT_GSqSS_4fileVs12StaticString4lineSu_T_">MTKAssertControl(_:sends:to:for:_:file:line:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F13MetovaTestKit18MTKAssertExceptionFT7messageKT_GSqSS_4fileVs12StaticString4lineSu9testBlockFT_T__GSqCSo11NSException_">MTKAssertException(message:file:line:testBlock:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F13MetovaTestKit28MTKAssertNoBrokenConstraintsFT7messageKT_GSqSS_4fileVs12StaticString4lineSu9testBlockFT_T__Su">MTKAssertNoBrokenConstraints(message:file:line:testBlock:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F13MetovaTestKit20MTKAssertNoExceptionFT7messageKT_GSqSS_4fileVs12StaticString4lineSu9testBlockFT_T__GSqCSo11NSException_">MTKAssertNoException(message:file:line:testBlock:)</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Functions.html#/s:F13MetovaTestKit25MTKAssertSegmentedControlFTCSo18UISegmentedControl16hasSegmentTitlesGSaSS_KT_GSqSS_4fileVs12StaticString4lineSu_T_">MTKAssertSegmentedControl(_:hasSegmentTitles:_:file:line:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/MTKTestable.html">MTKTestable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/ExpectedAlertAction.html">ExpectedAlertAction</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <p><a href="https://cocoapods.org/pods/MTK"><img src="https://github.com/metova/MetovaTestKit/blob/master/Assets/MetovaTestKit.png?raw=true" alt="MetovaTestKit"></a></p>

<p align="center">
 <a href="https://travis-ci.org/metova/MetovaTestKit" target="_blank"><img src="https://travis-ci.org/metova/MetovaTestKit.svg?branch=master" alt="Build Status"></a> 
 <a href="https://cocoapods.org/pods/MTK" target="_blank"><img src="https://img.shields.io/cocoapods/v/MTK.svg" alt="CocoaPods Compatible"/></a> 
 <a href="http://metova.github.io/MetovaTestKit/docs" target="_blank"><img src="https://cdn.rawgit.com/metova/MetovaTestKit/master/docs/badge.svg" alt="Documentation"/></a>
 <a href="https://coveralls.io/github/metova/MetovaTestKit?branch=master" target="_blank"><img src="https://coveralls.io/repos/github/metova/MetovaTestKit/badge.svg?branch=master&dummy=no_cache_please_1" alt="Coverage Status"/></a>
 <a href="http://cocoadocs.org/docsets/MTK" target="_blank"><img src="https://img.shields.io/cocoapods/p/MTK.svg?style=flat" alt="Platform"/></a>
 <a href="http://twitter.com/metova" target="_blank"><img src="https://img.shields.io/badge/twitter-@Metova-3CAC84.svg" alt="Twitter"/></a>
 <br/>
</p>
 

<p>Metova Test Kit is a collection of useful test helpers designed to ease the burden of writing tests for iOS applications.</p>

<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a>

<ul>
<li><a href="#mtktestable">MTKTestable Protocol</a></li>
<li><a href="#testing-uikit-components">Testing UIKit Components</a>

<ul>
<li><a href="#uicontrol">UIControl</a></li>
<li><a href="#uialertcontroller">UIAlertController</a></li>
<li><a href="#uisegmentedcontrol">UISegmentedControl</a></li>
<li><a href="#uibarbuttonitem">UIBarButtonItem</a></li>
</ul></li>
<li><a href="#testing-auto-layout-constraints">Testing Auto Layout Constraints</a></li>
<li><a href="#testing-exceptions">Testing Exceptions</a></li>
<li><a href="#asynchronous-testing">Asynchronous Testing</a></li>
</ul></li>
<li><a href="#documentation">Documentation</a></li>
<li><a href="#credits">Credits</a></li>
<li><a href="#license">License</a></li>
</ul>

<hr>
<h1 id='requirements' class='heading'>Requirements</h1>

<ul>
<li>Swift 3.0</li>
<li>iOS 8.0</li>
</ul>

<hr>
<h1 id='installation' class='heading'>Installation</h1>

<p>Metova Test Kit is available through <a href="http://cocoapods.org">CocoaPods</a>.</p>

<p>Metova Test Kit is intended to be used with unit testing targets. To install it, add MTK your project&rsquo;s Podfile:</p>
<pre class="highlight ruby"><code><span class="n">target</span> <span class="s1">'YourApp'</span> <span class="k">do</span>
  <span class="c1"># Your app's pods:</span>
  <span class="n">pod</span> <span class="s1">'DataManager'</span>
  <span class="n">pod</span> <span class="s1">'ThunderCats'</span>
  <span class="n">pod</span> <span class="s1">'MetovaBase'</span>

  <span class="n">target</span> <span class="s1">'YourAppTests'</span> <span class="k">do</span>
    <span class="n">inherit!</span> <span class="ss">:search_paths</span>
    <span class="n">pod</span> <span class="s1">'MTK'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>And run <code>pod install</code></p>

<p>If you would like to test a beta version of Metova Test Kit, you can install the latest from develop:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'MTK'</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'https://github.com/metova/MetovaTestKit.git'</span><span class="p">,</span> <span class="ss">:branch</span> <span class="o">=&gt;</span> <span class="s1">'develop'</span>
</code></pre>

<hr>
<h1 id='usage' class='heading'>Usage</h1>
<h2 id='mtktestable' class='heading'>MTKTestable</h2>

<p>Metova Test Kit defines the <code>MTKTestable</code> protocol. Correct implementation of this protocol allows for functional unit testing. It abstracts away the set up and tear down code into extensions of the types you want to test, and allows for functional unit tests.</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">testOutlets</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">HomeViewControllerClass</span><span class="o">.</span><span class="n">test</span> <span class="p">{</span> <span class="n">testVC</span> <span class="k">in</span>
        <span class="kt">XCTAssertNotNil</span><span class="p">(</span><span class="n">testVC</span><span class="o">.</span><span class="n">userameTextField</span><span class="p">)</span>
        <span class="kt">XCTAssertNotNil</span><span class="p">(</span><span class="n">testVC</span><span class="o">.</span><span class="n">passwordTextField</span><span class="p">)</span>
        <span class="kt">XCTAssertNotNil</span><span class="p">(</span><span class="n">testVC</span><span class="o">.</span><span class="n">loginButton</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='testing-uikit-components' class='heading'>Testing UIKit Components</h2>
<h3 id='uicontrol' class='heading'>UIControl</h3>

<p>With a single assertion, you can verify that your control actions are hooked up and that your target actually responds to the selector that will be sent to it. </p>
<pre class="highlight swift"><code><span class="kt">MTKAssertControl</span><span class="p">(</span><span class="n">testVC</span><span class="o">.</span><span class="n">loginButton</span><span class="p">,</span> <span class="nv">sends</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">LoginViewController.didTapLoginButton(_:)</span><span class="kd">)</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="n">testVC</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">touchUpInside</span><span class="p">,</span> <span class="s">"The login button should be hooked up to the login action."</span><span class="p">)</span> 
</code></pre>
<h3 id='uialertcontroller' class='heading'>UIAlertController</h3>

<p>Verify that a view controller presented an alert having a particular style, title, message, and actions.</p>
<pre class="highlight swift"><code><span class="kt">MTKAssertAlertIsPresented</span><span class="p">(</span>
    <span class="nv">by</span><span class="p">:</span> <span class="n">testVC</span><span class="p">,</span>
    <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">alert</span><span class="p">,</span>
    <span class="nv">title</span><span class="p">:</span> <span class="s">"Warning"</span><span class="p">,</span>
    <span class="nv">message</span><span class="p">:</span> <span class="s">"Are you sure you want to delete this user?"</span><span class="p">,</span>
    <span class="nv">actions</span><span class="p">:</span> <span class="p">[</span>
        <span class="kt">ExpectedAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"Delete"</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">destructive</span><span class="p">),</span>
        <span class="kt">ExpectedAlertAction</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"Cancel"</span><span class="p">,</span> <span class="nv">style</span><span class="p">:</span> <span class="o">.</span><span class="n">cancel</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre>
<h3 id='uisegmentedcontrol' class='heading'>UISegmentedControl</h3>

<p>Verify that a <code>UISegmentedControl</code> has the segment titles you are expecting. </p>
<pre class="highlight swift"><code><span class="kt">MTKAssertSegmentedControl</span><span class="p">(</span><span class="n">segmentedControl</span><span class="p">,</span> <span class="nv">hasSegmentTitles</span><span class="p">:</span> <span class="p">[</span><span class="s">"Followers"</span><span class="p">,</span> <span class="s">"Following"</span><span class="p">])</span>
</code></pre>
<h3 id='uibarbuttonitem' class='heading'>UIBarButtonItem</h3>

<p>Verify that a bar button item has the expected target/action pair and that the target actually responds to the selector that will be sent to it. </p>
<pre class="highlight swift"><code><span class="kt">MTKAssertBarButtonItem</span><span class="p">(</span><span class="n">testVC</span><span class="o">.</span><span class="n">editBarButtonItem</span><span class="p">,</span> <span class="nv">sends</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">MyViewController.didTapEditButton(_:)</span><span class="kd">)</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="n">testVC</span><span class="p">)</span> 
</code></pre>
<h2 id='testing-auto-layout-constraints' class='heading'>Testing Auto Layout Constraints</h2>

<p>You can use Metova Test Kit to assert that you do not have broken Auto Layout constraints.</p>
<pre class="highlight swift"><code><span class="kt">MTKAssertNoBrokenConstraints</span> <span class="p">{</span>
    <span class="c1">// code that does anything that impacts the user interface</span>
    <span class="c1">// including simply loading a view for the first time</span>
<span class="p">}</span>
</code></pre>

<p>This assertion will fail for any broken constraints and report the number of constraints that broke during the test. You can also pass a custom message.</p>
<pre class="highlight swift"><code><span class="kt">MTKAssertNoBrokenConstraints</span><span class="p">(</span><span class="nv">message</span><span class="p">:</span> <span class="s">"Constraints were broken."</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// code to test</span>
<span class="p">}</span>
</code></pre>

<p>This test also returns a value with a count of the number of constraints broken.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">brokenConstraintCount</span> <span class="o">=</span> <span class="kt">MTKAssertNoBrokenConstraints</span> <span class="p">{</span>
    <span class="c1">// code to test</span>
<span class="p">}</span>
</code></pre>
<h2 id='testing-exceptions' class='heading'>Testing Exceptions</h2>

<p>You can use Metova Test Kit to assert that code that should not throw exceptions doesn&rsquo;t. Without MTK, this would result in the entire test suite crashing. With MTK, this is just a failed test, and you still get to run the rest of the test suite.</p>
<pre class="highlight swift"><code><span class="kt">MTKAssertNoException</span> <span class="p">{</span>
    <span class="c1">// code that should not throw exceptions</span>
    <span class="c1">// results in passing test if no exceptions are thrown</span>
    <span class="c1">// results in failing test if exceptions are thrown</span>
<span class="p">}</span>
</code></pre>

<p>You can also pass a message to print on failure.</p>
<pre class="highlight swift"><code><span class="kt">MTKAssertNoException</span><span class="p">(</span><span class="nv">message</span><span class="p">:</span> <span class="s">"Exception was thrown."</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// code that should not throw exceptions</span>
    <span class="c1">// results in passing test if no exceptions are thrown</span>
    <span class="c1">// results in failing test if exceptions are thrown</span>
<span class="p">}</span>
</code></pre>

<p>You can also test code to verify that exceptions are thrown, and can do this without crashing your test suite. If you do not care about the specific exception but only want to verify that the code block throws an exception, you can use <code>MTKAssertException</code>:</p>
<pre class="highlight swift"><code><span class="kt">MTKAssertException</span> <span class="p">{</span>
    <span class="c1">// code that should throw exceptions</span>
    <span class="c1">// results in passing test if an exception is thrown</span>
    <span class="c1">// results in a failing test if this closure returns without throwing</span>
<span class="p">}</span>
</code></pre>

<p>Like <code>MTKAssertNoException</code>, this function also accepts a message:</p>
<pre class="highlight swift"><code><span class="kt">MTKAssertException</span><span class="p">(</span><span class="nv">message</span><span class="p">:</span> <span class="s">"No exception was thrown."</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// code that should throw exceptions</span>
    <span class="c1">// results in passing test if an exception is thrown</span>
    <span class="c1">// results in a failing test if this closure returns without throwing</span>
<span class="p">}</span>
</code></pre>

<p>These methods do return the thrown exception in case you need more information about it.</p>
<pre class="highlight swift"><code><span class="k">guard</span> <span class="k">let</span> <span class="nv">exception</span> <span class="o">=</span> <span class="kt">MTKAssertException</span><span class="p">(</span><span class="nv">testBlock</span><span class="p">:</span> <span class="n">throwingBlock</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
    <span class="kt">XCTFail</span><span class="p">(</span><span class="s">"Block failed to throw an exception"</span><span class="p">)</span>
    <span class="k">return</span>
<span class="p">}</span>

<span class="c1">// More assertion about the given exception that was returned</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">exception</span> <span class="o">=</span> <span class="kt">MTKAssertNoException</span><span class="p">(</span><span class="nv">testBlock</span><span class="p">:</span> <span class="n">blockThatShouldntThrow</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">XCTFail</span><span class="p">(</span><span class="s">"Block should not have thrown but instead threw </span><span class="se">\(</span><span class="n">exception</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="k">return</span>
<span class="p">}</span>
</code></pre>

<p>If the closure did not throw an exception, the function returns <code>nil</code>. Otherwise, it returns an instance of <code>NSException</code> which you can verify is the exception you expected your block to throw.</p>
<h2 id='asynchronous-testing' class='heading'>Asynchronous Testing</h2>

<p>XCTest provides asynchronous testing capabilities using <code>expectation(description:)</code> and <code>waitForExpectations(timeout:handler:)</code>. However, when testing simple delayed asynchronous actions, this approach can be cumbersome and the intent might not be immediately obvious. Using MTK&rsquo;s <code>MTKWaitThenContinueTest(after:testAction:)</code> utility method, these kinds of tests become simple and they read naturally.</p>
<pre class="highlight swift"><code><span class="nf">mockUserSearchNetworkRequest</span><span class="p">(</span><span class="nv">withResponseTime</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span>
<span class="n">testViewController</span><span class="o">.</span><span class="nf">didTapSearchButton</span><span class="p">()</span>

<span class="kt">XCTAssertFalse</span><span class="p">(</span><span class="n">testViewController</span><span class="o">.</span><span class="n">searchButton</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">,</span> <span class="s">"The search button should be disabled while a search request is taking place."</span><span class="p">)</span>

<span class="kt">MTKWaitThenContinueTest</span><span class="p">(</span><span class="nv">after</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">XCTAssertTrue</span><span class="p">(</span><span class="n">testViewController</span><span class="o">.</span><span class="n">searchButton</span><span class="o">.</span><span class="n">isEnabled</span><span class="p">,</span> <span class="s">"Once the request is complete, the search button should be re-enabled."</span><span class="p">)</span> 
<span class="p">}</span>
</code></pre>

<hr>
<h1 id='documentation' class='heading'>Documentation</h1>

<p>Documentation can be found <a href="http://metova.github.io/MetovaTestKit/docs">here</a>.</p>

<hr>
<h1 id='credits' class='heading'>Credits</h1>

<p>Metova Test Kit is owned and maintained by <a href="https://metova.com">Metova Inc.</a></p>

<p><a href="https://github.com/Metova/MetovaTestKit/graphs/contributors">Contributors</a></p>

<p>If you would like to contribute to Metova Test Kit, see our <a href="CONTRIBUTING.md">CONTRIBUTING</a> guidelines.</p>

<p>Metova Test Kit banner image and other assets provided by Christi Johnson.</p>

<hr>
<h1 id='license' class='heading'>License</h1>

<p>Metova Test Kit is available under the MIT license. See the <a href="LICENSE">LICENSE</a> file for more info.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2017 <a class="link" href="http://metova.com" target="_blank" rel="external">Nick Griffith and Logan Gauthier</a>. All rights reserved. (Last updated: 2017-07-25)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
